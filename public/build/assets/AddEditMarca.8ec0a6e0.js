import{_ as w}from"./DialogFormModal.e18ee1c1.js";import{aO as h,h as g,p as V,o as y,c as x,w as o,a as _,t as d,b as l,k as N,i as B}from"./app.50683a97.js";import{b as M,a as E,V as G}from"./index.4549214f.js";import{V as O}from"./VTextField.65545f13.js";const R={__name:"AddEditMarca",props:{show:{type:Boolean,required:!1,default:!1},formulario:{type:Object,default:()=>null},timeout:{type:Number,default:1e3}},emits:["addingMarca","update:show","update:formulario"],setup(i,{emit:n}){const s=i,m=h(),e=g({id:0,nombre:"",procedencia:"General",errors:{nombre:""},processing:!1});V(s,()=>{s.formulario&&(e.value.id=s.formulario.id,e.value.nombre=s.formulario.nombre)});async function f(){try{e.value.processing=!0;let r=e.value.id==0?route("tenant.almacen.marcas.store"):route("tenant.almacen.marcas.update",{marca:e.value.id});const a=e.value.id==0?"post":"put",{data:t}=await axios[a](r,e.value),{success:v,message:c,errors:b}=t;if(!v)throw{message:c,errors:b};m.success(c,{timeout:s.timeout}),n("addingMarca"),u()}catch(r){e.value.processing=!1,r.errors&&p(r.errors)}}function p(r){for(let a in e.value.errors)r.hasOwnProperty(a)&&(e.value.errors[a]=r[a][0]),r.hasOwnProperty(a)||(e.value.errors[a]="")}function u(){n("update:show",!1),n("update:formulario",{id:0,descripcion:"",ubicacion:""}),e.value={id:0,nombre:"",procedencia:"General",errors:{nombre:""},processing:!1}}return(r,a)=>(y(),x(w,{show:i.show,"onUpdate:show":a[1]||(a[1]=t=>B(show)?show.value=t:null),onSubmitted:f,onClose:u,processing:e.value.processing,maxWidth:450},{title:o(()=>[_("h3",null,d(e.value.id==0?"Nueva marca":"Editar marca"),1)]),content:o(()=>[l(E,null,{default:o(()=>[l(M,{cols:"12",md:"12"},{default:o(()=>[l(O,{"error-messages":e.value.errors.nombre,density:"comfortable",variant:"outlined",label:"Nombre",modelValue:e.value.nombre,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.nombre=t)},null,8,["error-messages","modelValue"])]),_:1})]),_:1})]),actions:o(()=>[l(G,{type:"submit"},{default:o(()=>[N(d(e.value.id==0?"Guardar":"Editar"),1)]),_:1})]),_:1},8,["show","processing"]))}};export{R as _};
