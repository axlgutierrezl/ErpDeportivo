import{aO as V,h,p as y,o as x,c as _,w as s,a as A,t as d,b as t,k as N,i as B}from"./app.50683a97.js";import{_ as E}from"./DialogFormModal.e18ee1c1.js";import{b as m,a as O,V as U}from"./index.4549214f.js";import{V as p}from"./VTextField.65545f13.js";const P={__name:"AddEditAlmacen",props:{show:{type:Boolean,required:!1,default:!1},formulario:{type:Object,default:()=>null},timeout:{type:Number,default:1e3}},emits:["addingAlmacen","update:show","update:formulario"],setup(n,{emit:l}){const i=n,f=V(),e=h({id:0,descripcion:"",ubicacion:"",errors:{descripcion:"",ubicacion:""},processing:!1});y(i,()=>{i.formulario&&(e.value.id=i.formulario.id,e.value.descripcion=i.formulario.descripcion,e.value.ubicacion=i.formulario.ubicacion)});async function v(){try{e.value.processing=!0;let o=e.value.id==0?route("tenant.almacen.almacenes.store"):route("tenant.almacen.almacenes.update");const a=e.value.id==0?"post":"put",{data:r}=await axios[a](o,e.value),{success:w,errors:g,message:c}=r;if(!w)throw{errors:g,message:c};f.success(c,{timeout:i.timeout}),l("addingAlmacen"),u()}catch(o){e.value.processing=!1,o.errors&&b(o.errors)}}function b(o){for(let a in e.value.errors)o.hasOwnProperty(a)&&(e.value.errors[a]=o[a][0]),o.hasOwnProperty(a)||(e.value.errors[a]="")}function u(){l("update:show",!1),l("update:formulario",{id:0,descripcion:"",ubicacion:""}),e.value={id:0,descripcion:"",ubicacion:"",errors:{descripcion:"",ubicacion:""},processing:!1}}return(o,a)=>(x(),_(E,{show:n.show,"onUpdate:show":a[2]||(a[2]=r=>B(show)?show.value=r:null),onSubmitted:v,onClose:u,processing:e.value.processing,maxWidth:450},{title:s(()=>[A("h3",null,d(e.value.id==0?"Nuevo almacen":"Editar almacen"),1)]),content:s(()=>[t(O,null,{default:s(()=>[t(m,{cols:"12",md:"12"},{default:s(()=>[t(p,{"error-messages":e.value.errors.descripcion,density:"comfortable",variant:"outlined",label:"Nombre",modelValue:e.value.descripcion,"onUpdate:modelValue":a[0]||(a[0]=r=>e.value.descripcion=r)},null,8,["error-messages","modelValue"])]),_:1}),t(m,{cols:"12",md:"12"},{default:s(()=>[t(p,{"error-messages":e.value.errors.ubicacion,density:"comfortable",variant:"outlined",label:"Ubicacion",modelValue:e.value.ubicacion,"onUpdate:modelValue":a[1]||(a[1]=r=>e.value.ubicacion=r)},null,8,["error-messages","modelValue"])]),_:1})]),_:1})]),actions:s(()=>[t(U,{type:"submit"},{default:s(()=>[N(d(e.value.id==0?"Guardar":"Editar"),1)]),_:1})]),_:1},8,["show","processing"]))}};export{P as _};
