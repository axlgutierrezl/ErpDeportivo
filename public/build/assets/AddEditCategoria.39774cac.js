import{_ as w}from"./DialogFormModal.e18ee1c1.js";import{aO as h,h as V,p as b,o as y,c as x,w as r,a as C,t as d,b as i,k as _,i as N}from"./app.50683a97.js";import{b as B,a as E,V as O}from"./index.4549214f.js";import{V as k}from"./VTextField.65545f13.js";const S={__name:"AddEditCategoria",props:{show:{type:Boolean,required:!1,default:!1},formulario:{type:Object,default:()=>null},timeout:{type:Number,default:1e3}},emits:["addingCategoria","update:show","update:formulario"],setup(u,{emit:l}){const s=u,p=h(),e=V({id:0,descripcion:"",processing:!1,errors:{descripcion:""}});b(s,()=>{s.formulario&&(e.value.id=s.formulario.id,e.value.descripcion=s.formulario.descripcion)});async function f(){try{e.value.processing=!0;let o=e.value.id==0?route("tenant.almacen.categorias.store"):route("tenant.almacen.categorias.update",{categoria:e.value.id});const a=e.value.id==0?"post":"put",{data:t}=await axios[a](o,e.value),{success:g,errors:v,message:c}=t;if(!g)throw{errors:v,message:c};p.success(c,{timeout:s.timeout}),l("addingCategoria"),n()}catch(o){e.value.processing=!1,o.errors&&m(o.errors)}}function m(o){for(let a in e.value.errors)o.hasOwnProperty(a)&&(e.value.errors[a]=o[a][0]),o.hasOwnProperty(a)||(e.value.errors[a]="")}function n(){l("update:show",!1),l("update:formulario",{id:0,descripcion:"",ubicacion:""}),e.value={id:0,descripcion:"",processing:!1,errors:{descripcion:""}}}return(o,a)=>(y(),x(w,{show:u.show,"onUpdate:show":a[1]||(a[1]=t=>N(show)?show.value=t:null),onSubmitted:f,onClose:n,processing:e.value.processing,maxWidth:450},{title:r(()=>[C("h3",null,d(e.value.id==0?"Nueva categoria":"Editar categoria"),1)]),content:r(()=>[i(E,null,{default:r(()=>[i(B,{cols:"12",md:"12"},{default:r(()=>[i(k,{"error-messages":e.value.errors.descripcion,density:"comfortable",variant:"outlined",label:"Nombre",modelValue:e.value.descripcion,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.descripcion=t)},null,8,["error-messages","modelValue"])]),_:1})]),_:1})]),actions:r(()=>[i(O,{type:"submit"},{default:r(()=>[_(d(e.value.id==0?"Guardar":"Editar"),1)]),_:1})]),_:1},8,["show","processing"]))}};export{S as _};
